<html>
<head>
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
</head>
<input id=yourid type="text">
<button id=but>I AM A BUTTON</button> <br>
<input id=text_input type="text">
<button id=but2>I AM ANOTHER BUTTON</button> <br>
<span id=myid>I DONT KNOW MY ID</span><br>
<span id=received> </span>


<body>
    <script>
        const text_input = document.getElementById('text_input')
        const yourid = document.getElementById('yourid')
        const but = document.getElementById('but')
        const but2 = document.getElementById('but2')
        const myid = document.getElementById('myid')
        const received = document.getElementById('received')

        var send_flag = false
        var conn

        var peer = new Peer({
            host: '127.0.0.1',
            port: 9000,
            path: '/myapp'
            });
    
        peer.on('open', function(id) {
            console.log('My peer ID is: ' + id);
            myid.innerHTML = id
        });

        but.onclick = function(){
            let target = yourid.value

            conn = peer.connect(target);
            conn.on('open', () => {
                send_flag = true
                });
        }

        but2.onclick = function(){
            if (send_flag){
                conn.send(text_input.value)
            }
        }

        peer.on('connection', (conn) => {
            conn.on('data', (data) => {
                received.innerHTML += data+ "<br>";
            })})
            
    </script>
</body>
</html>

<!-- $ peerjs --port 9000 --key peerjs --path /myapp -->